<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather Widget</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <a id="weather" class="weatherwidget-io"
     href="https://forecast7.com/en/53d55n10d00e/hamburg/"
     data-label_1="HAMBURG"
     data-icons="Climacons Animated"
     data-mode="Current"
     data-theme="pure">
     Hamburg
  </a>

  <script src="script.js"></script>
  <script>
    window.onload = () => {
      navigator.geolocation.getCurrentPosition(pos => {
        const lat = pos.coords.latitude.toFixed(2);
        const lon = pos.coords.longitude.toFixed(2);
        const el = document.getElementById("weather");

        // format: 53d55n10d00e
        const latStr = `${lat.replace('.', 'd')}n`;
        const lonStr = `${lon.replace('.', 'd')}e`;
        const url = `https://forecast7.com/en/${latStr}${lonStr}/yourcity/`;

        el.href = url;
        el.dataset.label_1 = "YOUR CITY";
        el.textContent = "Weather";

        // reload widget
        const js = document.createElement("script");
        js.src = "https://weatherwidget.io/js/widget.min.js";
        document.body.appendChild(js);
      });
    };
  </script>
</body>
</html>
